# ÐŸÐ°Ñ‚Ñ‚ÐµÑ€Ð½Ñ‹ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ñ Ð±Ð¾Ð»ÑŒÑˆÐ¸Ð¼Ð¸ Ð´Ð°Ð½Ð½Ñ‹Ð¼Ð¸ (Ð¿Ð°Ð³Ð¸Ð½Ð°Ñ†Ð¸Ñ, Ð±Ð°Ñ‚Ñ‡ÐµÐ²Ñ‹Ðµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ)**. 
Ð­Ñ‚Ð¾ ÐºÑ€Ð¸Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð²Ð°Ð¶Ð½Ð°Ñ Ñ‚ÐµÐ¼Ð° Ð´Ð»Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ñ Ñ€ÐµÐ°Ð»ÑŒÐ½Ñ‹Ð¼Ð¸ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°Ð¼Ð¸, Ð³Ð´Ðµ Ð¾Ð±ÑŠÐµÐ¼Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¸Ð·Ð¼ÐµÑ€ÑÑŽÑ‚ÑÑ Ð¼Ð¸Ð»Ð»Ð¸Ð¾Ð½Ð°Ð¼Ð¸ Ð¸ Ð¼Ð¸Ð»Ð»Ð¸Ð°Ñ€Ð´Ð°Ð¼Ð¸ ÑÑ‚Ñ€Ð¾Ðº. Ð“Ð»Ð°Ð²Ð½Ð°Ñ ÑÑƒÑ‚ÑŒ Ð·Ð´ÐµÑÑŒ â€” Ð¸Ð·Ð±ÐµÐ³Ð°Ñ‚ÑŒ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¹, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð±Ð»Ð¾ÐºÐ¸Ñ€ÑƒÑŽÑ‚ Ð²ÑÑŽ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñƒ Ð¸Ð»Ð¸ Ð¿ÐµÑ€ÐµÐ³Ñ€ÑƒÐ¶Ð°ÑŽÑ‚ Ð¶ÑƒÑ€Ð½Ð°Ð» Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ð¹.

Ð”Ð»Ñ Ð½Ð°Ñ‡Ð°Ð»Ð°, Ð²Ð¾Ñ‚ Ð½Ð°Ð³Ð»ÑÐ´Ð½Ð°Ñ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ð°, ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ ÑÑ€Ð°Ð²Ð½Ð¸Ð²Ð°ÐµÑ‚ ÐºÐ»ÑŽÑ‡ÐµÐ²Ñ‹Ðµ Ð¿Ð¾Ð´Ñ…Ð¾Ð´Ñ‹:

| ÐŸÐ°Ñ‚Ñ‚ÐµÑ€Ð½ | ÐžÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ Ð¿Ñ€Ð¸Ð½Ñ†Ð¸Ð¿ | ÐšÐ¾Ð³Ð´Ð° Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ | Ð“Ð»Ð°Ð²Ð½Ð¾Ðµ Ð¿Ñ€ÐµÐ¸Ð¼ÑƒÑ‰ÐµÑÑ‚Ð²Ð¾ | Ð“Ð»Ð°Ð²Ð½Ñ‹Ð¹ Ð½ÐµÐ´Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ðº |
| :--- | :--- | :--- | :--- | :--- |
| **ÐšÐ»ÑŽÑ‡ÐµÐ²Ð°Ñ Ð¿Ð°Ð³Ð¸Ð½Ð°Ñ†Ð¸Ñ (Seek Method)** | `WHERE id > @last_id` Ð²Ð¼ÐµÑÑ‚Ð¾ `OFFSET` | Ð’ÐµÐ±-Ð¿Ð°Ð³Ð¸Ð½Ð°Ñ†Ð¸Ñ (ÐºÐ½Ð¾Ð¿ÐºÐ¸ "Ð’Ð¿ÐµÑ€ÐµÐ´"/"ÐÐ°Ð·Ð°Ð´"), Ð±ÐµÑÐºÐ¾Ð½ÐµÑ‡Ð½Ð°Ñ Ð»ÐµÐ½Ñ‚Ð°, Ñ„Ð¾Ð½Ð¾Ð²Ñ‹Ðµ Ð·Ð°Ð´Ð°Ñ‡Ð¸. | **ÐŸÐ¾ÑÑ‚Ð¾ÑÐ½Ð½Ð°Ñ ÑÐºÐ¾Ñ€Ð¾ÑÑ‚ÑŒ** Ð½ÐµÐ·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ Ð¾Ñ‚ Ð½Ð¾Ð¼ÐµÑ€Ð° ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñ‹. | ÐÐµÐ²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ Ð¿Ñ€Ñ‹Ð³Ð½ÑƒÑ‚ÑŒ Ð½Ð° Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð»ÑŒÐ½ÑƒÑŽ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñƒ (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, ÑÑ‚Ñ€. 100). |
| **`OFFSET FETCH` ÐŸÐ°Ð³Ð¸Ð½Ð°Ñ†Ð¸Ñ** | ÐŸÑ€Ð¾Ð¿ÑƒÑÐº N ÑÑ‚Ñ€Ð¾Ðº, Ð²Ð·ÑÑ‚Ð¸Ðµ M ÑÑ‚Ñ€Ð¾Ðº. | UI Ñ Ð½Ð¾Ð¼ÐµÑ€Ð°Ð¼Ð¸ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†, ÐºÐ¾Ð³Ð´Ð° Ð¾Ð±Ñ‰ÐµÐµ Ñ‡Ð¸ÑÐ»Ð¾ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ† Ð½ÐµÐ²ÐµÐ»Ð¸ÐºÐ¾ (Ð´ÐµÑÑÑ‚ÐºÐ¸/ÑÐ¾Ñ‚Ð½Ð¸). | ÐŸÑ€Ð¾ÑÑ‚Ð¾Ñ‚Ð° Ñ€ÐµÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸, Ð¿Ñ€ÑÐ¼Ð¾Ð¹ Ð´Ð¾ÑÑ‚ÑƒÐ¿ Ðº Ð»ÑŽÐ±Ð¾Ð¹ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ðµ. | **Ð›Ð¸Ð½ÐµÐ¹Ð½Ñ‹Ð¹ Ñ€Ð¾ÑÑ‚ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸** Ð½Ð° Ð³Ð»ÑƒÐ±Ð¾ÐºÐ¸Ñ… ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ð°Ñ…. |
| **Ð‘Ð°Ñ‚Ñ‡ÐµÐ²Ð¾Ðµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ/Ð£Ð´Ð°Ð»ÐµÐ½Ð¸Ðµ** | Ð¦Ð¸ÐºÐ» Ñ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¾Ð¹ ÑÑ‚Ñ€Ð¾Ðº Ð¿Ð¾Ñ€Ñ†Ð¸ÑÐ¼Ð¸ (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, Ð¿Ð¾ 1000). | ÐœÐ°ÑÑÐ¾Ð²Ñ‹Ðµ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ (Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ ÑÑ‚Ð°Ñ‚ÑƒÑÐ°, ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ðµ ÑƒÑÑ‚Ð°Ñ€ÐµÐ²ÑˆÐ¸Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ…, ETL). | ÐœÐ¸Ð½Ð¸Ð¼Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²Ð¾Ðº, ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»ÑŒ Ð½Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð½Ð° Ð¶ÑƒÑ€Ð½Ð°Ð» Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ð¹ Ð¸ `tempdb`. | ÐÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ÑÑ‚ÑŒ Ð¿Ð¸ÑÐ°Ñ‚ÑŒ Ð±Ð¾Ð»ÐµÐµ ÑÐ»Ð¾Ð¶Ð½Ñ‹Ð¹ ÐºÐ¾Ð´ (Ñ†Ð¸ÐºÐ»Ñ‹, ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»ÑŒ Ð¿Ñ€Ð¾Ð³Ñ€ÐµÑÑÐ°). |

### ðŸŽ¯ **Ð¡ÑƒÑ‚ÑŒ ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ Ð¿Ð¾Ð´Ñ…Ð¾Ð´Ð° Ð¸ Ð¿Ð¾Ð´Ð²Ð¾Ð´Ð½Ñ‹Ðµ ÐºÐ°Ð¼Ð½Ð¸**

#### **1. ÐŸÐ°Ð³Ð¸Ð½Ð°Ñ†Ð¸Ñ: `OFFSET` vs "ÐšÐ»ÑŽÑ‡ÐµÐ²Ð°Ñ" (Keyset)**
*   **Ð¡ÑƒÑ‚ÑŒ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹ `OFFSET`:** Ð§Ñ‚Ð¾Ð±Ñ‹ Ð¿Ñ€Ð¾Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ 1 000 000 ÑÑ‚Ñ€Ð¾Ðº Ð¸ Ð²Ð·ÑÑ‚ÑŒ 10, ÑÐµÑ€Ð²ÐµÑ€ Ð´Ð¾Ð»Ð¶ÐµÐ½ **Ñ„Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð½Ð°Ð¹Ñ‚Ð¸, Ð¾Ñ‚ÑÐ¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¸ Ð¿Ñ€Ð¾Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ** Ð²ÑÐµ ÑÑ‚Ð¸ Ð¼Ð¸Ð»Ð»Ð¸Ð¾Ð½Ñ‹ ÑÑ‚Ñ€Ð¾Ðº. Ð­Ñ‚Ð¾ Ð¾Ñ‡ÐµÐ½ÑŒ Ð´Ð¾Ñ€Ð¾Ð³Ð¾. ÐšÐ°Ðº Ð²Ð¸Ð´Ð½Ð¾ Ð½Ð° Ð³Ñ€Ð°Ñ„Ð¸ÐºÐµ Ð² Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ð°Ñ…, Ð²Ñ€ÐµÐ¼Ñ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ñ€Ð°ÑÑ‚ÐµÑ‚ Ñ ÑƒÐ²ÐµÐ»Ð¸Ñ‡ÐµÐ½Ð¸ÐµÐ¼ `OFFSET`.
*   **Ð¡ÑƒÑ‚ÑŒ ÐºÐ»ÑŽÑ‡ÐµÐ²Ð¾Ð¹ Ð¿Ð°Ð³Ð¸Ð½Ð°Ñ†Ð¸Ð¸:** Ð’Ñ‹ Ð·Ð°Ð¿Ð¾Ð¼Ð¸Ð½Ð°ÐµÑ‚Ðµ **Ð¿Ð¾ÑÐ»ÐµÐ´Ð½ÐµÐµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ** ÑÐ¾Ñ€Ñ‚Ð¸Ñ€ÑƒÐµÐ¼Ð¾Ð³Ð¾ ÑÑ‚Ð¾Ð»Ð±Ñ†Ð° Ñ Ð¿Ñ€ÐµÐ´Ñ‹Ð´ÑƒÑ‰ÐµÐ¹ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñ‹ Ð¸ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚Ðµ ÐµÐ³Ð¾ Ð´Ð»Ñ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ð°Ñ†Ð¸Ð¸. Ð­Ñ‚Ð¾ Ð¿Ð¾Ð·Ð²Ð¾Ð»ÑÐµÑ‚ ÑÑ„Ñ„ÐµÐºÑ‚Ð¸Ð²Ð½Ð¾ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ Ð¸Ð½Ð´ÐµÐºÑ.
    ```sql
    -- ÐšÐ»ÑŽÑ‡ÐµÐ²Ð°Ñ Ð¿Ð°Ð³Ð¸Ð½Ð°Ñ†Ð¸Ñ. Ð‘Ñ‹ÑÑ‚Ñ€Ð¾ Ð´Ð°Ð¶Ðµ Ð½Ð° 1000-Ð¹ "ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ðµ".
    SELECT TOP (100) *
    FROM Orders
    WHERE OrderId > @LastOrderIdFromPreviousPage -- Ð—Ð´ÐµÑÑŒ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ, Ð·Ð°Ð¿Ð¾Ð¼Ð½ÐµÐ½Ð½Ð¾Ðµ Ñ Ð¿Ñ€Ð¾ÑˆÐ»Ð¾Ð¹ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñ‹
    ORDER BY OrderId;
    ```
    *   **ÐŸÐ¾Ð´Ð²Ð¾Ð´Ð½Ñ‹Ð¹ ÐºÐ°Ð¼ÐµÐ½ÑŒ:** Ð•ÑÐ»Ð¸ ÑÐ¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²ÐºÐ° Ð½Ðµ Ð¿Ð¾ ÑƒÐ½Ð¸ÐºÐ°Ð»ÑŒÐ½Ð¾Ð¼Ñƒ Ð¿Ð¾Ð»ÑŽ (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, Ð¿Ð¾ `CreatedDate`), Ð±ÑƒÐ´ÑƒÑ‚ Ð´ÑƒÐ±Ð»Ð¸ Ð¸ Ð¿Ñ€Ð¾Ð¿ÑƒÑÐºÐ¸. Ð ÐµÑˆÐµÐ½Ð¸Ðµ â€” Ð´Ð¾Ð±Ð°Ð²Ð»ÑÑ‚ÑŒ Ð² `ORDER BY` ÑƒÐ½Ð¸ÐºÐ°Ð»ÑŒÐ½Ñ‹Ð¹ ÑÑ‚Ð¾Ð»Ð±ÐµÑ† (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, `Id`).
*   **ÐšÐ¾Ð³Ð´Ð° Ñ‡Ñ‚Ð¾ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ:** Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ **ÐºÐ»ÑŽÑ‡ÐµÐ²ÑƒÑŽ Ð¿Ð°Ð³Ð¸Ð½Ð°Ñ†Ð¸ÑŽ** Ð²ÐµÐ·Ð´Ðµ, Ð³Ð´Ðµ ÑÑ‚Ð¾ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ (Ð±ÐµÑÐºÐ¾Ð½ÐµÑ‡Ð½Ð°Ñ Ð»ÐµÐ½Ñ‚Ð°, Ð¿Ð¾ÑÐ»ÐµÐ´Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð°Ñ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ°). `OFFSET FETCH` Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÐµÑÐ»Ð¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŽ Ð¶Ð¸Ð·Ð½ÐµÐ½Ð½Ð¾ Ð½ÑƒÐ¶Ð½Ñ‹ Ð¿Ñ€ÑÐ¼Ñ‹Ðµ Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´Ñ‹ Ð½Ð° ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñ‹, Ð¸ Ð²Ñ‹ Ð¶ÐµÑÑ‚ÐºÐ¾ Ð¾Ð³Ñ€Ð°Ð½Ð¸Ñ‡Ð¸Ð²Ð°ÐµÑ‚Ðµ Ð¼Ð°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½ÑƒÑŽ Ð³Ð»ÑƒÐ±Ð¸Ð½Ñƒ.

#### **2. Ð‘Ð°Ñ‚Ñ‡ÐµÐ²Ñ‹Ðµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ (Batch Updates)**
*   **Ð¡ÑƒÑ‚ÑŒ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹:** ÐžÐ´Ð¸Ð½ Ð±Ð¾Ð»ÑŒÑˆÐ¾Ð¹ `UPDATE` Ð¸Ð»Ð¸ `DELETE` Ð½Ð° Ð¼Ð¸Ð»Ð»Ð¸Ð¾Ð½Ñ‹ ÑÑ‚Ñ€Ð¾Ðº Ð±ÐµÑ€ÐµÑ‚ **Ð¼Ð¾Ð½Ð¾Ð¿Ð¾Ð»ÑŒÐ½ÑƒÑŽ Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²ÐºÑƒ** Ð½Ð° Ð²ÑÑŽ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñƒ (Ð¸Ð»Ð¸ Ð±Ð¾Ð»ÑŒÑˆÑƒÑŽ ÐµÐµ Ñ‡Ð°ÑÑ‚ÑŒ), Ð¿ÐµÑ€ÐµÐ¿Ð¾Ð»Ð½ÑÐµÑ‚ Ð¶ÑƒÑ€Ð½Ð°Ð» Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ð¹ Ð¸ Ð¼Ð¾Ð¶ÐµÑ‚ Ð²Ñ‹Ð·Ð²Ð°Ñ‚ÑŒ ÑÐ±Ð¾Ð¹ Ñ€ÐµÐ¿Ð»Ð¸ÐºÐ°Ñ†Ð¸Ð¸. Ð­Ñ‚Ð¾ **Ð³Ð»Ð°Ð²Ð½Ñ‹Ð¹ Ð°Ð½Ñ‚Ð¸Ð¿Ð°Ñ‚Ñ‚ÐµÑ€Ð½**.
*   **Ð¡ÑƒÑ‚ÑŒ Ñ€ÐµÑˆÐµÐ½Ð¸Ñ:** Ð Ð°Ð·Ð±Ð¸Ñ‚ÑŒ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸ÑŽ Ð½Ð° Ð¼ÐµÐ»ÐºÐ¸Ðµ Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ð¸.
    ```sql
    -- ÐŸÑ€Ð¸Ð¼ÐµÑ€ ÐºÐ°Ñ€ÐºÐ°ÑÐ° Ð±Ð°Ñ‚Ñ‡ÐµÐ²Ð¾Ð³Ð¾ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ
    WHILE (1=1)
    BEGIN
        UPDATE TOP (5000) MyTable
        SET Status = 'Processed'
        WHERE Status = 'New';

        IF @@ROWCOUNT = 0
            BREAK; -- Ð£ÑÐ»Ð¾Ð²Ð¸Ðµ Ð²Ñ‹Ñ…Ð¾Ð´Ð°: ÑÑ‚Ñ€Ð¾Ðº Ð´Ð»Ñ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ Ð½Ðµ Ð¾ÑÑ‚Ð°Ð»Ð¾ÑÑŒ

        WAITFOR DELAY '00:00:01'; -- ÐŸÐ°ÑƒÐ·Ð° Ð´Ð»Ñ ÑÐ½Ð¸Ð¶ÐµÐ½Ð¸Ñ Ð½Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸
    END
    ```
*   **ÐšÐ»ÑŽÑ‡ÐµÐ²Ñ‹Ðµ Ð¿Ð¾Ð´Ð²Ð¾Ð´Ð½Ñ‹Ðµ ÐºÐ°Ð¼Ð½Ð¸:**
    1.  **ÐžÐ¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ Ð±Ð°Ñ‚Ñ‡Ð°:** Ð˜Ð´ÐµÐ°Ð»ÑŒÐ½Ñ‹Ð¹ Ñ€Ð°Ð·Ð¼ÐµÑ€ (1000, 5000, 10000) Ð·Ð°Ð²Ð¸ÑÐ¸Ñ‚ Ð¾Ñ‚ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹. ÐÐ°Ñ‡Ð½Ð¸Ñ‚Ðµ Ñ 1000-5000 Ð¸ Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€ÑŒÑ‚Ðµ Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²ÐºÐ¸.
    2.  **ÐŸÐ¾Ð²Ñ‚Ð¾Ñ€Ð½Ð°Ñ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ°:** Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ, Ñ‡Ñ‚Ð¾ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ð¹ Ð±Ð°Ñ‚Ñ‡ Ð½Ðµ Ð¾Ð±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÑ‚ ÑƒÐ¶Ðµ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð½Ñ‹Ðµ ÑÑ‚Ñ€Ð¾ÐºÐ¸. Ð§Ð°ÑÑ‚Ð¾ Ð´Ð»Ñ ÑÑ‚Ð¾Ð³Ð¾ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÑŽÑ‚ `WHERE` Ð¿Ð¾ Ð¿ÐµÑ€Ð²Ð¸Ñ‡Ð½Ð¾Ð¼Ñƒ ÐºÐ»ÑŽÑ‡Ñƒ Ð¸Ð»Ð¸ Ñ„Ð»Ð°Ð³Ñƒ.
    3.  **ÐÐ°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð½Ð° `tempdb`:** Ð¡Ð»Ð¾Ð¶Ð½Ñ‹Ðµ ÑƒÑÐ»Ð¾Ð²Ð¸Ñ `WHERE` Ð¼Ð¾Ð³ÑƒÑ‚ ÑÐ¾Ð·Ð´Ð°Ð²Ð°Ñ‚ÑŒ Ð½Ð°Ð³Ñ€ÑƒÐ·ÐºÑƒ. Ð˜Ð½Ð¾Ð³Ð´Ð° Ð¿Ð¾Ð¼Ð¾Ð³Ð°ÐµÑ‚ Ð¿Ñ€ÐµÐ´Ð²Ð°Ñ€Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¹ Ð¾Ñ‚Ð±Ð¾Ñ€ ÐºÐ»ÑŽÑ‡ÐµÐ¹ Ð²Ð¾ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½ÑƒÑŽ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñƒ, Ð½Ð¾ ÑÑ‚Ð¾ Ñ‚Ð¾Ð¶Ðµ Ð¼Ð¾Ð¶ÐµÑ‚ Ð±Ñ‹Ñ‚ÑŒ Ð´Ð¾Ñ€Ð¾Ð³Ð¾.

### ðŸ’¡ **Ð§Ñ‚Ð¾ ÑÐ¿Ñ€Ð¾ÑÑÑ‚ Ð½Ð° ÑÐ¾Ð±ÐµÑÐµÐ´Ð¾Ð²Ð°Ð½Ð¸Ð¸ Ð¸ ÐºÐ°Ðº Ð¾Ñ‚Ð²ÐµÑ‡Ð°Ñ‚ÑŒ**
1.  **"ÐšÐ°Ðº Ð²Ñ‹ Ñ€ÐµÐ°Ð»Ð¸Ð·ÑƒÐµÑ‚Ðµ Ð¿Ð°Ð³Ð¸Ð½Ð°Ñ†Ð¸ÑŽ Ð² Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹ÑÐµ Ñ Ð¼Ð¸Ð»Ð»Ð¸Ð¾Ð½Ð°Ð¼Ð¸ Ð·Ð°Ð¿Ð¸ÑÐµÐ¹?"**
    *   **Ð¥Ð¾Ñ€Ð¾ÑˆÐ¸Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚:** "Ð”Ð»Ñ Ð½Ð°Ð²Ð¸Ð³Ð°Ñ†Ð¸Ð¸ "Ð²Ð¿ÐµÑ€ÐµÐ´/Ð½Ð°Ð·Ð°Ð´" Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÑŽ ÐºÐ»ÑŽÑ‡ÐµÐ²ÑƒÑŽ Ð¿Ð°Ð³Ð¸Ð½Ð°Ñ†Ð¸ÑŽ Ð½Ð° ÑƒÐ½Ð¸ÐºÐ°Ð»ÑŒÐ½Ð¾Ð¼, Ð¸Ð½Ð´ÐµÐºÑÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð¾Ð¼ ÑÑ‚Ð¾Ð»Ð±Ñ†Ðµ. Ð­Ñ‚Ð¾ Ð´Ð°ÐµÑ‚ Ð¿Ð¾ÑÑ‚Ð¾ÑÐ½Ð½ÑƒÑŽ ÑÐºÐ¾Ñ€Ð¾ÑÑ‚ÑŒ. Ð•ÑÐ»Ð¸ Ð½ÑƒÐ¶ÐµÐ½ Ð¿Ñ€ÑÐ¼Ð¾Ð¹ Ð´Ð¾ÑÑ‚ÑƒÐ¿ Ðº ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ð°Ð¼ â€” Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÑÑŽ `OFFSET`, Ð½Ð¾ Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾ Ð¾Ð³Ñ€Ð°Ð½Ð¸Ñ‡Ð¸Ð²Ð°ÑŽ Ð¼Ð°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ð¾ Ð´Ð¾Ð¿ÑƒÑÑ‚Ð¸Ð¼Ñ‹Ð¹ `OFFSET` (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, 10 000 ÑÑ‚Ñ€Ð¾Ðº) Ð¸ ÑƒÐ±ÐµÐ¶Ð´Ð°ÑŽÑÑŒ, Ñ‡Ñ‚Ð¾ `ORDER BY` Ð¿Ð¾ÐºÑ€Ñ‹Ñ‚ Ð¸Ð½Ð´ÐµÐºÑÐ¾Ð¼".
    *   **ÐžÑ‚Ð»Ð¸Ñ‡Ð½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚:** Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ð¿Ñ€Ð¾ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ `ROW_NUMBER()` Ð² CTE Ð´Ð»Ñ ÑÐ»Ð¾Ð¶Ð½Ñ‹Ñ… ÑÐ¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²Ð¾Ðº, Ð½Ð¾ Ñ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ð°Ñ†Ð¸ÐµÐ¹ Ð¿Ð¾ `WHERE n > @start AND n < @end` ÐºÐ°Ðº Ð±Ð¾Ð»ÐµÐµ Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÐ½ÑƒÑŽ Ð°Ð»ÑŒÑ‚ÐµÑ€Ð½Ð°Ñ‚Ð¸Ð²Ñƒ Ñ‡Ð¸ÑÑ‚Ð¾Ð¼Ñƒ `OFFSET` Ð² Ð½ÐµÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ñ… ÑÐ»ÑƒÑ‡Ð°ÑÑ…, Ð¾ÑÐ¾Ð±ÐµÐ½Ð½Ð¾ Ð¿Ñ€Ð¸ Ð²ÐºÐ»ÑŽÑ‡ÐµÐ½Ð½Ð¾Ð¼ batch mode Ð² SQL Server 2019+.

2.  **"Ð’Ð°Ð¼ Ð½ÑƒÐ¶Ð½Ð¾ Ð¾Ð±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ 100 Ð¼Ð¸Ð»Ð»Ð¸Ð¾Ð½Ð¾Ð² ÑÑ‚Ñ€Ð¾Ðº Ð² Ð°ÐºÑ‚Ð¸Ð²Ð½Ð¾Ð¹ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ðµ. Ð’Ð°ÑˆÐ¸ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ?"**
    *   **Ð¥Ð¾Ñ€Ð¾ÑˆÐ¸Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚:** "ÐÐ¸ Ð² ÐºÐ¾ÐµÐ¼ ÑÐ»ÑƒÑ‡Ð°Ðµ Ð½Ðµ Ð¾Ð´Ð½Ð¸Ð¼ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð¼. Ð¯ Ð½Ð°Ð¿Ð¸ÑˆÑƒ ÑÐºÑ€Ð¸Ð¿Ñ‚ Ñ Ñ†Ð¸ÐºÐ»Ð¾Ð¼, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð±ÑƒÐ´ÐµÑ‚ Ð¾Ð±Ð½Ð¾Ð²Ð»ÑÑ‚ÑŒ ÑÑ‚Ñ€Ð¾ÐºÐ¸ Ð±Ð°Ñ‚Ñ‡Ð°Ð¼Ð¸, Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, Ð¿Ð¾ 5000. Ð’Ð½ÑƒÑ‚Ñ€Ð¸ ÐºÐ°Ð¶Ð´Ð¾Ð¹ Ð¸Ñ‚ÐµÑ€Ð°Ñ†Ð¸Ð¸ â€” ÑÐ²Ð¾Ñ ÐºÐ¾Ñ€Ð¾Ñ‚ÐºÐ°Ñ Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ñ. Ð’Ð°Ð¶Ð½Ð¾ Ð²Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾Ðµ ÑƒÑÐ»Ð¾Ð²Ð¸Ðµ `WHERE` Ð´Ð»Ñ ÑÑ„Ñ„ÐµÐºÑ‚Ð¸Ð²Ð½Ð¾Ð³Ð¾ Ð¿Ð¾Ð¸ÑÐºÐ° ÑÑ‚Ñ€Ð¾Ðº ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ Ð±Ð°Ñ‚Ñ‡Ð° (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, Ð¿Ð¾ Ð¿ÐµÑ€Ð²Ð¸Ñ‡Ð½Ð¾Ð¼Ñƒ ÐºÐ»ÑŽÑ‡Ñƒ). Ð¢Ð°ÐºÐ¶Ðµ Ð´Ð¾Ð±Ð°Ð²Ð»ÑŽ Ð¿Ð°ÑƒÐ·Ñƒ `WAITFOR DELAY` Ð¼ÐµÐ¶Ð´Ñƒ Ð±Ð°Ñ‚Ñ‡Ð°Ð¼Ð¸, Ñ‡Ñ‚Ð¾Ð±Ñ‹ ÑÐ½Ð¸Ð·Ð¸Ñ‚ÑŒ Ð½Ð°Ð³Ñ€ÑƒÐ·ÐºÑƒ Ð½Ð° Ð´Ð¸ÑÐº Ð¸ Ð´Ð°Ñ‚ÑŒ Ð¿Ð¾Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚ÑŒ Ð´Ñ€ÑƒÐ³Ð¸Ð¼ Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐ°Ð¼".
    *   **ÐžÑ‚Ð»Ð¸Ñ‡Ð½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚:** Ð£Ð¿Ð¾Ð¼ÑÐ½Ð¸Ñ‚Ðµ Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒÑŽ `sys.dm_os_waiting_tasks` Ð½Ð° Ð¾Ð¶Ð¸Ð´Ð°Ð½Ð¸Ñ `PAGEIOLATCH_*`, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð²ÑÑ‚Ð°Ð²Ð»ÑÑ‚ÑŒ Ð´Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ð¿Ð°ÑƒÐ·Ñ‹ Ð¿Ñ€Ð¸ Ð²Ñ‹ÑÐ¾ÐºÐ¾Ð¹ Ð½Ð°Ð³Ñ€ÑƒÐ·ÐºÐµ Ð½Ð° Ð¿Ð¾Ð´ÑÐ¸ÑÑ‚ÐµÐ¼Ñƒ Ð²Ð²Ð¾Ð´Ð°-Ð²Ñ‹Ð²Ð¾Ð´Ð°. Ð¢Ð°ÐºÐ¶Ðµ Ð¼Ð¾Ð¶Ð½Ð¾ ÑÐºÐ°Ð·Ð°Ñ‚ÑŒ Ð¾ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚Ð¸ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸ Ð² Ñ‡Ð°ÑÑ‹ Ð½Ð°Ð¸Ð¼ÐµÐ½ÑŒÑˆÐµÐ¹ Ð½Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð¸ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ð¸ `OUTPUT`, Ñ‡Ñ‚Ð¾Ð±Ñ‹ ÑÑ€Ð°Ð·Ñƒ ÑƒÐ´Ð°Ð»ÑÑ‚ÑŒ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ð½Ð½Ñ‹Ðµ ÑÑ‚Ñ€Ð¾ÐºÐ¸ Ð¸Ð· Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ð¾Ð¹ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñ‹.

