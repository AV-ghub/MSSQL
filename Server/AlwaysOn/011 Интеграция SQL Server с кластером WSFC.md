## üß± –≠—Ç–∞–ø 9: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è SQL Server —Å –∫–ª–∞—Å—Ç–µ—Ä–æ–º WSFC ‚Äî –¥–≤–∞ –ø—É—Ç–∏

### **–ü—É—Ç—å 1: SQL Server Failover Cluster Instance (FCI)**
**–°—É—Ç—å:** –£—Å—Ç–∞–Ω–æ–≤–∫–∞ **—Å–∞–º–æ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ SQL Server** –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–π —Ä–æ–ª–∏ WSFC. –≠–∫–∑–µ–º–ø–ª—è—Ä —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≤—ã—Å–æ–∫–æ–¥–æ—Å—Ç—É–ø–Ω—ã–º —Ä–µ—Å—É—Ä—Å–æ–º –∫–ª–∞—Å—Ç–µ—Ä–∞.

**–ö–∞–∫ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è:**
1.  –ó–∞–ø—É—Å—Ç–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É SQL Server –Ω–∞ –ø–µ—Ä–≤–æ–º —É–∑–ª–µ –∫–ª–∞—Å—Ç–µ—Ä–∞.
2.  –ù–∞ —à–∞–≥–µ **"–í—ã–±–æ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤"** –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –æ—Ç–º–µ—Ç—å—Ç–µ **Database Engine Services**.
3.  –ù–∞ —à–∞–≥–µ **"–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —ç–∫–∑–µ–º–ø–ª—è—Ä–∞"**:
    *   –£–∫–∞–∂–∏—Ç–µ **–°–µ—Ç–µ–≤–æ–µ –∏–º—è —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `SQLFCI`). –≠—Ç–æ –±—É–¥–µ—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –∏–º—è, –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ–µ –∏–º–µ–Ω–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞.
4.  –ù–∞ —à–∞–≥–µ **"–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞"**:
    *   –£–∫–∞–∂–∏—Ç–µ –∏–º—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞ WSFC (–Ω–∞–ø—Ä–∏–º–µ—Ä, `ProdSQLCluster`).
    *   –î–æ–±–∞–≤—å—Ç–µ IP-–∞–¥—Ä–µ—Å –¥–ª—è –Ω–æ–≤–æ–≥–æ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –∏–º–µ–Ω–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ (`SQLFCI`).
5.  –ù–∞ —à–∞–≥–µ **"–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Database Engine"** —É–∫–∞–∂–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —É—á–µ—Ç–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π –∏ –∫–∞—Ç–∞–ª–æ–≥–æ–≤. **–í–∞–∂–Ω–æ:** –°–∏—Å—Ç–µ–º–Ω—ã–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (master, model, msdb, tempdb) –±—É–¥—É—Ç —Ä–∞–∑–º–µ—â–µ–Ω—ã –Ω–∞ **–æ–±—â–µ–º –∫–ª–∞—Å—Ç–µ—Ä–Ω–æ–º –¥–∏—Å–∫–µ**, –∫–æ—Ç–æ—Ä—ã–π –≤—ã –≤—ã–±–µ—Ä–µ—Ç–µ –Ω–∞ —ç—Ç–æ–º —à–∞–≥–µ.
6.  –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞ –ø–µ—Ä–≤–æ–º —É–∑–ª–µ –∑–∞–ø—É—Å—Ç–∏—Ç–µ **–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —É–∑–ª–∞ (Add Node)** –∫ —ç—Ç–æ–º—É —ç–∫–∑–µ–º–ø–ª—è—Ä—É FCI –Ω–∞ –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —É–∑–ª–∞—Ö –∫–ª–∞—Å—Ç–µ—Ä–∞ —á–µ—Ä–µ–∑ –ø—Ä–æ–≥—Ä–∞–º–º—É —É—Å—Ç–∞–Ω–æ–≤–∫–∏ SQL Server.

**–ö–ª—é—á–µ–≤–æ–π –º–æ–º–µ–Ω—Ç FCI:** –î–∞–Ω–Ω—ã–µ SQL Server (—Ñ–∞–π–ª—ã MDF/LDF) –Ω–∞—Ö–æ–¥—è—Ç—Å—è –Ω–∞ **–æ–±—â–µ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∫–ª–∞—Å—Ç–µ—Ä–∞** (SAN, iSCSI). –ê–∫—Ç–∏–≤–µ–Ω —Ç–æ–ª—å–∫–æ —Ç–æ—Ç —É–∑–µ–ª, –∫–æ—Ç–æ—Ä—ã–π –≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –≤–ª–∞–¥–µ–µ—Ç —ç—Ç–∏–º–∏ –¥–∏—Å–∫–∞–º–∏.

---

### **–ü—É—Ç—å 2: AlwaysOn Availability Groups (AG)**
**–°—É—Ç—å:** –ù–∞—Å—Ç—Ä–æ–π–∫–∞ **–≤—ã—Å–æ–∫–æ–≥–æ —É—Ä–æ–≤–Ω—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö**. –≠–∫–∑–µ–º–ø–ª—è—Ä—ã SQL Server —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –∫–∞–∫ –æ–±—ã—á–Ω—ã–µ (standalone), –Ω–æ –ø–æ—Ç–æ–º –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è –≤ –≥—Ä—É–ø–ø—É –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏.

**–ö–∞–∫ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è:**
1.  **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ SQL Server (–æ–±—ã—á–Ω—É—é, standalone –≤–µ—Ä—Å–∏—é) –Ω–∞ –≤—Å–µ –±—É–¥—É—â–∏–µ —É–∑–ª—ã-—Ä–µ–ø–ª–∏–∫–∏.** –ù–∞ —à–∞–≥–µ –≤—ã–±–æ—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –æ—Ç–º–µ—Ç—å—Ç–µ **"–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤—ã—Å–æ–∫–æ–≥–æ —É—Ä–æ–≤–Ω—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ AlwaysOn"**.
2.  **–í–∫–ª—é—á–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é AlwaysOn** –Ω–∞ –∫–∞–∂–¥–æ–º —ç–∫–∑–µ–º–ø–ª—è—Ä–µ SQL Server:
    *   –ß–µ—Ä–µ–∑ SQL Server Configuration Manager: –ø—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π –Ω–∞ —Å–ª—É–∂–±–µ SQL Server ‚Üí –°–≤–æ–π—Å—Ç–≤–∞ ‚Üí –≤–∫–ª–∞–¥–∫–∞ `–í—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ AlwaysOn` ‚Üí –ø–æ—Å—Ç–∞–≤—å—Ç–µ –≥–∞–ª–æ—á–∫—É `–í–∫–ª—é—á–∏—Ç—å –≥—Ä—É–ø–ø—ã –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ AlwaysOn` ‚Üí –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–ª—É–∂–±—É.
    *   –ß–µ—Ä–µ–∑ PowerShell: `Enable-SqlAlwaysOn -ServerInstance "YourInstanceName" -Force`
3.  **–°–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω–µ—á–Ω—É—é —Ç–æ—á–∫—É** –¥–ª—è –æ–±–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏ –º–µ–∂–¥—É —Ä–µ–ø–ª–∏–∫–∞–º–∏ (–µ—Å–ª–∏ –µ—ë –Ω–µ—Ç). –ö–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, –º–∞—Å—Ç–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è AG —Å–¥–µ–ª–∞–µ—Ç —ç—Ç–æ —Å–∞–º.
4.  **–°–æ–∑–¥–∞–π—Ç–µ –≥—Ä—É–ø–ø—É –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏** —á–µ—Ä–µ–∑ –º–∞—Å—Ç–µ—Ä –≤ SSMS –∏–ª–∏ T-SQL. –ú–∞—Å—Ç–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –Ω–æ–≤—É—é —Ä–æ–ª—å –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ WSFC.
    *   –í–∞–∂–Ω–æ: –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ AG –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ –ø–æ—è–≤–∏—Ç—Å—è **–Ω–æ–≤–∞—è —Ä–æ–ª—å** —Å –∏–º–µ–Ω–µ–º –≥—Ä—É–ø–ø—ã –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏.
    *   –î–ª—è —ç—Ç–æ–π —Ä–æ–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç—Å—è **—Å–µ—Ç–µ–≤–æ–µ –∏–º—è (Listener)**, –µ—Å–ª–∏ –≤—ã –µ–≥–æ —É–∫–∞–∂–µ—Ç–µ.

**–ö–ª—é—á–µ–≤–æ–π –º–æ–º–µ–Ω—Ç AG:** –ö–∞–∂–¥–∞—è —Ä–µ–ø–ª–∏–∫–∞ (—É–∑–µ–ª) —Ö—Ä–∞–Ω–∏—Ç —Å–≤–æ—é **–ª–æ–∫–∞–ª—å–Ω—É—é –∫–æ–ø–∏—é** –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–≤–æ—ë–º —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ. –ö–ª–∞—Å—Ç–µ—Ä WSFC —É–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —Ä–æ–ª–∏ AG.

---

## ‚öñÔ∏è –≠—Ç–∞–ø 10: –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞: –∫–∞–∫ FCI –∏ AG –∏—Å–ø–æ–ª—å–∑—É—é—Ç WSFC

| –ê—Å–ø–µ–∫—Ç | SQL Server Failover Cluster Instance (FCI) | AlwaysOn Availability Groups (AG) |
| :--- | :--- | :--- |
| **–ß—Ç–æ —è–≤–ª—è–µ—Ç—Å—è —Ä–µ—Å—É—Ä—Å–æ–º –∫–ª–∞—Å—Ç–µ—Ä–∞?** | **–í–µ—Å—å —ç–∫–∑–µ–º–ø–ª—è—Ä SQL Server** (—Å–ª—É–∂–±–∞, IP, –∏–º—è, –¥–∏—Å–∫–∏). | **–†–æ–ª—å "–ì—Ä—É–ø–ø–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏"**, —Å–æ–¥–µ—Ä–∂–∞—â–∞—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ. –ö–∞–∂–¥—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä SQL ‚Äî –æ—Ç–¥–µ–ª—å–Ω–∞—è —Å–ª—É–∂–±–∞ –Ω–∞ —É–∑–ª–µ. |
| **–•—Ä–∞–Ω–∏–ª–∏—â–µ** | **–û–±—â–µ–µ (Shared Storage)**. –í—Å–µ —É–∑–ª—ã –≤–∏–¥—è—Ç –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ –¥–∏—Å–∫–∏. | **–õ–æ–∫–∞–ª—å–Ω–æ–µ (Local Storage)**. –£ –∫–∞–∂–¥–æ–≥–æ —É–∑–ª–∞ —Å–≤–æ—è –∫–æ–ø–∏—è –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–≤–æ–∏—Ö –¥–∏—Å–∫–∞—Ö. |
| **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç WSFC** | **–ê–±—Å–æ–ª—é—Ç–Ω–∞—è.** –ë–µ–∑ –∫–ª–∞—Å—Ç–µ—Ä–∞ —ç–∫–∑–µ–º–ø–ª—è—Ä –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç. | **–£—Å–ª–æ–≤–Ω–∞—è.** –ö–ª–∞—Å—Ç–µ—Ä –Ω—É–∂–µ–Ω –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ –∏ failover. –≠–∫–∑–µ–º–ø–ª—è—Ä—ã SQL –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ (standalone). |
| **–û–±—ä–µ–∫—Ç—ã –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ** | **–í–∏–¥–Ω–æ:** –†–æ–ª—å SQL Server, IP-–∞–¥—Ä–µ—Å, —Å–µ—Ç–µ–≤–æ–µ –∏–º—è, –∑–∞–≤–∏—Å–∏–º—ã–µ –æ–±—â–∏–µ –¥–∏—Å–∫–∏. | **–í–∏–¥–Ω–æ:** –†–æ–ª—å AG, IP-–∞–¥—Ä–µ—Å –∏ –∏–º—è –ø—Ä–æ—Å–ª—É—à–∏–≤–∞—Ç–µ–ª—è (Listener). **–ù–µ –≤–∏–¥–Ω–æ:** –î–∏—Å–∫–∏ –∏ —Å–∞–º–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã SQL Server. |
| **–¢–∏–ø —Å–±–æ—è, –∫–æ—Ç–æ—Ä—ã–π –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç** | –°–±–æ–π **–∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è, –û–°, —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ SQL**. | –°–±–æ–π **–±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ SQL, –û–°, –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è**. |
| **–ß—Ç–æ –ø–µ—Ä–µ–µ–∑–∂–∞–µ—Ç –ø—Ä–∏ failover?** | –í—Å—è —Ä–æ–ª—å: —Å–ª—É–∂–±–∞, IP, –∏–º—è, –¥–æ—Å—Ç—É–ø –∫ –¥–∏—Å–∫–∞–º. | –¢–æ–ª—å–∫–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ä–æ–ª–∏ AG (–∫–∞–∫–∞—è —Ä–µ–ø–ª–∏–∫–∞ –ø–µ—Ä–≤–∏—á–Ω–∞—è). IP –∏ –∏–º—è –ø—Ä–æ—Å–ª—É—à–∏–≤–∞—Ç–µ–ª—è –ø—Ä–∏–≤—è–∑—ã–≤–∞—é—Ç—Å—è –∫ –Ω–æ–≤–æ–º—É —É–∑–ª—É. |

---

## üö® –≠—Ç–∞–ø 11: –ü–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏ –∏ —á–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏ –ø—Ä–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### **–û–±—â–∏–µ –¥–ª—è FCI –∏ AG:**
1.  **–ù–µ–≤–µ—Ä–Ω—ã–µ –ø—Ä–∞–≤–∞ –≤ Active Directory:** –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –∏–º–µ–Ω–∏ (–¥–ª—è FCI –∏–ª–∏ Listener AG) –∫–ª–∞—Å—Ç–µ—Ä –ø—ã—Ç–∞–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å –æ–±—ä–µ–∫—Ç –≤ AD. –û—à–∏–±–∫–∞ –ø—Ä–∞–≤ ‚Äî —Å–∞–º–∞—è —á–∞—Å—Ç–∞—è –ø—Ä–∏—á–∏–Ω–∞ —Å–±–æ—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏.
    *   **–†–µ—à–µ–Ω–∏–µ:** Pre-stage –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –∏–º—è –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ –≤ AD –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∞ —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞ (CNO).
2.  **–ö–æ–Ω—Ñ–ª–∏–∫—Ç IP-–∞–¥—Ä–µ—Å–æ–≤:** –£–∫–∞–∑–∞–Ω–Ω—ã–π –¥–ª—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –∏–º–µ–Ω–∏ IP-–∞–¥—Ä–µ—Å —É–∂–µ –∑–∞–Ω—è—Ç –≤ —Å–µ—Ç–∏.
3.  **–ü—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ç–µ–≤—ã–º –ø—Ä–æ—Ñ–∏–ª–µ–º Windows:** –ï—Å–ª–∏ —Å–µ—Ç—å –Ω–∞ —É–∑–ª–∞—Ö –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –∫–∞–∫ "Public", –∫–ª–∞—Å—Ç–µ—Ä–Ω–∞—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è –º–æ–∂–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å—Å—è –±—Ä–∞–Ω–¥–º–∞—É—ç—Ä–æ–º. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–æ—Ñ–∏–ª—å "Private" –∏–ª–∏ "Domain".

### **–°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è FCI:**
1.  **"–î–∏—Å–∫–∏ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –º–∞—Å—Ç–µ—Ä–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏":** –û–±—â–∏–µ –¥–∏—Å–∫–∏ –Ω–µ –±—ã–ª–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ –∫–ª–∞—Å—Ç–µ—Ä –∏–ª–∏ –Ω–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –æ–Ω–ª–∞–π–Ω-—Å–æ—Å—Ç–æ—è–Ω–∏–∏ –Ω–∞ —É–∑–ª–µ, —Å –∫–æ—Ç–æ—Ä–æ–≥–æ –∑–∞–ø—É—â–µ–Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∞.
    *   **–†–µ—à–µ–Ω–∏–µ:** –ß–µ—Ä–µ–∑ Failover Cluster Manager —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –¥–∏—Å–∫–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Ä–µ—Å—É—Ä—Å–∞—Ö –∫–ª–∞—Å—Ç–µ—Ä–∞ –∏ –∏—Ö –º–æ–∂–Ω–æ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –≤ –æ–Ω–ª–∞–π–Ω –Ω–∞ —Ç–µ–∫—É—â–µ–º —É–∑–ª–µ.
2.  **–¢–æ—á–∫–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (Mount Points):** –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –µ—Å—Ç—å, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –∞–∫–∫—É—Ä–∞—Ç–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏. –õ–µ–≥—á–µ –¥–æ–ø—É—Å—Ç–∏—Ç—å –æ—à–∏–±–∫—É, —á–µ–º —Å –±—É–∫–≤–∞–º–∏ –¥–∏—Å–∫–æ–≤.

### **–°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è AG:**
1.  **–ü–æ—Ä—Ç —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –±—Ä–∞–Ω–¥–º–∞—É—ç—Ä–æ–º:** –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ—Ä—Ç 5022. –ï–≥–æ –Ω—É–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å –Ω–∞ –≤—Å–µ—Ö —É–∑–ª–∞—Ö –¥–ª—è –¥—Ä—É–≥ –¥—Ä—É–≥–∞.
    *   **–†–µ—à–µ–Ω–∏–µ:** `New-NetFirewallRule -DisplayName "Allow SQL AG" -Direction Inbound -Protocol TCP -LocalPort 5022 -Action Allow`
2.  **–°–ª—É–∂–±–∞ SQL Server –∑–∞–ø—É—â–µ–Ω–∞ –Ω–µ –ø–æ–¥ –¥–æ–º–µ–Ω–Ω–æ–π —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å—å—é:** –î–ª—è AG –≤—Å–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ–¥ —É—á–µ—Ç–Ω—ã–º–∏ –∑–∞–ø–∏—Å—è–º–∏ –¥–æ–º–µ–Ω–∞, –∫–æ—Ç–æ—Ä—ã–µ –∏–º–µ—é—Ç –ø—Ä–∞–≤–∞ –¥—Ä—É–≥ –Ω–∞ –¥—Ä—É–≥–∞.
3.  **–ù–µ –≤–∫–ª—é—á–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è AlwaysOn:** –°–∞–º–∞—è –ø—Ä–æ—Å—Ç–∞—è –∏ –æ–±–∏–¥–Ω–∞—è –æ—à–∏–±–∫–∞. –ë–µ–∑ —ç—Ç–æ–≥–æ —Ñ–ª–∞–∂–∫–∞ –º–∞—Å—Ç–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è AG –Ω–µ —É–≤–∏–¥–∏—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –∫–∞–∫ –≤–æ–∑–º–æ–∂–Ω—ã–µ —Ä–µ–ø–ª–∏–∫–∏.

---

## üîß –≠—Ç–∞–ø 12: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### **–î–ª—è FCI:**
```powershell
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ä–æ–ª—å SQL Server –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ –æ–Ω–ª–∞–π–Ω
Get-ClusterResource -Cluster "ProdSQLCluster" | Where-Object {$_.ResourceType -like "*SQL Server*"}
# –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–º—É –∏–º–µ–Ω–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ —á–µ—Ä–µ–∑ SSMS
```

### **–î–ª—è AG:**
```sql
-- –ù–∞ –ª—é–±–æ–π —Ä–µ–ø–ª–∏–∫–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ AG
SELECT ag.name, ar.replica_server_name, drs.synchronization_state_desc
FROM sys.dm_hadr_database_replica_states drs
JOIN sys.availability_replicas ar ON drs.replica_id = ar.replica_id
JOIN sys.availability_groups ag ON ag.group_id = drs.group_id;
```

**–ù–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ –≤—ã –¥–æ–ª–∂–Ω—ã –ø–æ–Ω–∏–º–∞—Ç—å, –∫–∞–∫ SQL Server "–ª–æ–∂–∏—Ç—Å—è" –Ω–∞ –≥–æ—Ç–æ–≤—ã–π –∫–ª–∞—Å—Ç–µ—Ä WSFC –¥–≤—É–º—è —Ä–∞–∑–Ω—ã–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏. –≠—Ç–æ –∫–ª—é—á –∫ –≤—ã–±–æ—Ä—É –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—é –Ω–µ–ø–æ–ª–∞–¥–æ–∫.**
