–ú–æ–¥–µ–ª—å –ø–∞–º—è—Ç–∏ SQL Server –º–æ–∂–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –∏–µ—Ä–∞—Ä—Ö–∏—é, –≥–¥–µ –¥–æ—Å—Ç—É–ø –∫ –ø–∞–º—è—Ç–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ ¬´–∫–ª–µ—Ä–∫–æ–≤ –ø–∞–º—è—Ç–∏¬ª. –≠—Ç–∏ –∫–ª–µ—Ä–∫–∏ –æ—Ç–≤–µ—á–∞—é—Ç –∑–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ –º–µ–∂–¥—É –æ—Å–Ω–æ–≤–Ω—ã–º–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è–º–∏, –≥–ª–∞–≤–Ω—ã–º –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö —è–≤–ª—è–µ—Ç—Å—è –±—É—Ñ–µ—Ä–Ω—ã–π –ø—É–ª.

–î–ª—è –Ω–∞–≥–ª—è–¥–Ω–æ—Å—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–º—è—Ç—å—é –ø–æ–∫–∞–∑–∞–Ω –Ω–∞ —Å—Ö–µ–º–µ –Ω–∏–∂–µ:

```mermaid
flowchart TD
    A[–û–ó–£ —Å–µ—Ä–≤–µ—Ä–∞ –î–æ—Å—Ç—É–ø–Ω–∞—è —Ñ–∏–∑–∏—á–µ—Å–∫–∞—è –ø–∞–º—è—Ç—å] --> |–†–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∏ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç—Å—è| –í[–î–∏—Ä–µ–∫—Ç–æ—Ä Director / SQLOS]

    B -->|–£–ø—Ä–∞–≤–ª—è–µ—Ç —á–µ—Ä–µ–∑| C[Memory Clerk<br>–ö–ª–µ—Ä–∫ –ø–∞–º—è—Ç–∏]
    
    C -->|–í—ã–¥–µ–ª—è–µ—Ç –¥–ª—è| D["–ü–ª–∞–Ω—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ<br>(–ü—Ä–æ—Ü–µ–¥—É—Ä–Ω—ã–π –∫—ç—à)"]
    C -->|–í—ã–¥–µ–ª—è–µ—Ç –¥–ª—è| E[–ë—É—Ñ–µ—Ä–Ω—ã–π –ø—É–ª / Buffer Pool]
    C -->|–í—ã–¥–µ–ª—è–µ—Ç –¥–ª—è| F["–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏, —Ö—ç—à–∏, –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ<br>–¥–ª—è –ø–∞–º—è—Ç–∏ —Ç–∞–±–ª–∏—Ü—ã (In-Memory OLTP)"]

    subgraph E_sub [–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë—É—Ñ–µ—Ä–Ω–æ–≥–æ –ø—É–ª–∞]
        direction LR
        E1[–°—Ç—Ä–∞–Ω–∏—Ü—ã –¥–∞–Ω–Ω—ã—Ö<br>–∏ –∏–Ω–¥–µ–∫—Å–æ–≤ 8 –ö–ë] --> E2[–ß–∏—Å—Ç—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã<br>Clean Pages]
        E1 --> E3["–ì—Ä—è–∑–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã<br>(Dirty Pages)<br>–∂–¥—É—Ç –∑–∞–ø–∏—Å–∏ –Ω–∞ –¥–∏—Å–∫"]
    end
    
    F --> G[TempDB –û–ø–µ—Ä–∞—Ü–∏–∏,<br>–Ω–µ –ø–æ–º–µ—Å—Ç–∏–≤—à–∏–µ—Å—è –≤ –ø–∞–º—è—Ç—å]
```

–¢–µ–ø–µ—Ä—å –¥–∞–≤–∞–π—Ç–µ –¥–µ—Ç–∞–ª—å–Ω–æ —Ä–∞–∑–±–µ—Ä–µ–º –∫–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –µ–≥–æ —Ä–∞–±–æ—Ç—É –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π –∏ –∫–∞–∫ –∑–∞ –Ω–∏–º —Å–ª–µ–¥–∏—Ç—å.

### üèóÔ∏è –£—Ä–æ–≤–µ–Ω—å 1: –Ø–¥—Ä–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–º—è—Ç—å—é (Memory Manager)
**–ß—Ç–æ —ç—Ç–æ –∏ –∑–∞—á–µ–º**: –ì–ª–∞–≤–Ω—ã–π ¬´–¥–∏—Ä–µ–∫—Ç–æ—Ä¬ª –≤—Å–µ–π –ø–∞–º—è—Ç–∏ SQL Server, —á–∞—Å—Ç—å –ø–æ–¥—Å–∏—Å—Ç–µ–º—ã SQLOS. –ï–≥–æ –∑–∞–¥–∞—á–∞ ‚Äî –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å –ø–∞–º—è—Ç—å –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ —Å–µ—Ä–≤–µ—Ä–∞, –æ—Å–≤–æ–±–æ–∂–¥–∞—è –µ—ë –æ–±—Ä–∞—Ç–Ω–æ –≤ –û–° –ø—Ä–∏ –Ω–µ—Ö–≤–∞—Ç–∫–µ. –ù–∞—á–∏–Ω–∞—è —Å SQL Server 2012, –ø–æ–¥ –µ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ø–∞–ª–∏ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –≤—Å–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –≤—ã–¥–µ–ª–µ–Ω–∏—è –ø–∞–º—è—Ç–∏ (—Ä–∞–Ω–µ–µ –Ω–∞–∑—ã–≤–∞–µ–º—ã–µ `Single-Page` –∏ `Multi-Page`), —á—Ç–æ —Å–¥–µ–ª–∞–ª–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–º.

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π**: –ü—Ä–∏ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ –¥–∏—Å–ø–µ—Ç—á–µ—Ä –ø—ã—Ç–∞–µ—Ç—Å—è –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞—Ç—å –º–µ–∂–¥—É –¥–≤—É–º—è —Ü–µ–ª—è–º–∏: –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞ –Ω–∞ –¥–∏—Å–∫ (–¥–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω –±–æ–ª—å—à–æ–π –±—É—Ñ–µ—Ä–Ω—ã–π –ø—É–ª) –∏ –Ω–µ –¥–æ–≤–æ–¥–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –¥–æ –¥–µ—Ñ–∏—Ü–∏—Ç–∞ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏. –ö–æ–≥–¥–∞ –ø–∞–º—è—Ç—å –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è, –æ–Ω –≤—ã–Ω—É–∂–¥–µ–Ω —á–∞—â–µ —Å–±—Ä–∞—Å—ã–≤–∞—Ç—å (¬´–∫—Ä–∞—Å—Ç—å¬ª) —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏–∑ –±—É—Ñ–µ—Ä–∞ –ø–æ–¥ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –Ω—É–∂–¥—ã –∏–ª–∏ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å ¬´–≥—Ä—è–∑–Ω—ã–µ¬ª —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–∞ –¥–∏—Å–∫.

**–ö–∞–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å**: –ö–ª—é—á–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ ‚Äî `Total Server Memory` (—Å–∫–æ–ª—å–∫–æ —É–∂–µ –∑–∞–Ω—è—Ç–æ) –∏ `Target Server Memory` (—Å–∫–æ–ª—å–∫–æ —Ö–æ—á–µ—Ç –∑–∞–Ω—è—Ç—å —Å–µ—Ä–≤–µ—Ä –¥–ª—è —Ç–µ–∫—É—â–µ–π –Ω–∞–≥—Ä—É–∑–∫–∏). –ò—Ö –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —Ç–∞–∫:
```sql
-- –ö–ª—é—á–µ–≤—ã–µ —Å—á–µ—Ç—á–∏–∫–∏ –ø–∞–º—è—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞
SELECT
    (committed_kb / 1024) AS Total_Server_Memory_MB,
    (committed_target_kb / 1024) AS Target_Server_Memory_MB
FROM sys.dm_os_sys_info;

-- –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ –∫–ª–µ—Ä–∫–∞–º (–≥–ª–∞–≤–Ω—ã–º –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è–º)
SELECT TOP 10
    [type] AS MemoryClerkType,
    SUM(pages_kb) / 1024 AS Size_MB
FROM sys.dm_os_memory_clerks
WHERE pages_kb != 0
GROUP BY [type]
ORDER BY Size_MB DESC;
```
–ï—Å–ª–∏ `Total` —Å—Ç–∞–±–∏–ª—å–Ω–æ –±–ª–∏–∑–æ–∫ –∫ `Target` ‚Äî —Å–µ—Ä–≤–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–æ–ª—å–∫–æ –ø–∞–º—è—Ç–∏, —Å–∫–æ–ª—å–∫–æ —Å—á–∏—Ç–∞–µ—Ç –Ω—É–∂–Ω—ã–º. –ï—Å–ª–∏ `Total` –∑–∞–º–µ—Ç–Ω–æ –Ω–∏–∂–µ `Target` ‚Äî —Å–µ—Ä–≤–µ—Ä –Ω–µ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –∂–µ–ª–∞–µ–º—ã–π –æ–±—ä–µ–º –∏–∑-–∑–∞ –Ω–µ—Ö–≤–∞—Ç–∫–∏ —Ä–µ—Å—É—Ä—Å–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ.

### üóÇÔ∏è –£—Ä–æ–≤–µ–Ω—å 2: –ë—É—Ñ–µ—Ä–Ω—ã–π –ø—É–ª (Buffer Pool / Buffer Cache)
**–ß—Ç–æ —ç—Ç–æ –∏ –∑–∞—á–µ–º**: –ì–ª–∞–≤–Ω—ã–π –∏ –∫—Ä—É–ø–Ω–µ–π—à–∏–π –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å –ø–∞–º—è—Ç–∏, —Ü–µ–ª—å –∫–æ—Ç–æ—Ä–æ–≥–æ ‚Äî –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–∞–Ω–Ω—ã—Ö –∏ –∏–Ω–¥–µ–∫—Å–æ–≤ (–ø–æ 8 –ö–ë –∫–∞–∂–¥–∞—è) –≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –º–µ–¥–ª–µ–Ω–Ω—ã—Ö —á—Ç–µ–Ω–∏–π —Å –¥–∏—Å–∫–∞.

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π**:
*   –ü–æ–¥ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π –∑–∞–ø–∏—Å—å—é –≤ –±—É—Ñ–µ—Ä–µ –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è **¬´–≥—Ä—è–∑–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã¬ª** (–∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ, –Ω–æ –µ—â–µ –Ω–µ –∑–∞–ø–∏—Å–∞–Ω–Ω—ã–µ –Ω–∞ –¥–∏—Å–∫).
*   –ü—Ä–æ—Ü–µ—Å—Å **Lazy Writer** –∏–ª–∏ **Checkpoint** –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç –∏—Ö –Ω–∞ –¥–∏—Å–∫.
*   –ï—Å–ª–∏ –ø–∞–º—è—Ç–∏ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç, SQL Server –≤—ã–Ω—É–∂–¥–µ–Ω —á–∞—â–µ –æ—á–∏—â–∞—Ç—å –±—É—Ñ–µ—Ä, –≤—ã—Ç–µ—Å–Ω—è—è —Å—Ç–∞—Ä—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã. –ü–æ–∫–∞–∑–∞—Ç–µ–ª—å **Page Life Expectancy** –Ω–∞—á–∏–Ω–∞–µ—Ç –ø–∞–¥–∞—Ç—å.

**–ö–∞–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å**:
```sql
-- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∫—ç—à–∞ (Buffer Cache Hit Ratio)
SELECT *
FROM sys.dm_os_performance_counters
WHERE counter_name = 'Buffer cache hit ratio'
   OR counter_name = 'Page life expectancy';

-- –ü—Ä–æ—Å–º–æ—Ç—Ä ¬´–≥—Ä—è–∑–Ω—ã—Ö¬ª —Å—Ç—Ä–∞–Ω–∏—Ü
SELECT COUNT(*) * 8 / 1024 AS DirtyPages_MB
FROM sys.dm_os_buffer_descriptors
WHERE is_modified = 1;
```
*   **Buffer Cache Hit Ratio**: —Å—Ç—Ä–µ–º–∏—Ç—Å—è –∫ 100%. –ó–Ω–∞—á–µ–Ω–∏–µ –Ω–∏–∂–µ 90-95% —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —á–∞—Å—Ç—ã–µ —á—Ç–µ–Ω–∏—è —Å –¥–∏—Å–∫–∞ –∏ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—É—é –Ω–µ—Ö–≤–∞—Ç–∫—É –û–ó–£.
*   **Page Life Expectancy (PLE)**: –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤ –±—É—Ñ–µ—Ä–µ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö. –†–µ–∑–∫–æ–µ –ø–∞–¥–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å —Ç—ã—Å—è—á –¥–æ —Å–æ—Ç–µ–Ω —Å–µ–∫—É–Ω–¥) ‚Äî –ø—Ä–∏–∑–Ω–∞–∫ –¥–∞–≤–ª–µ–Ω–∏—è –Ω–∞ –ø–∞–º—è—Ç—å.

### üíæ –£—Ä–æ–≤–µ–Ω—å 3: –ü—Ä–æ—Ü–µ–¥—É—Ä–Ω—ã–π –∫—ç—à (Plan Cache)
**–ß—Ç–æ —ç—Ç–æ –∏ –∑–∞—á–µ–º**: –•—Ä–∞–Ω–∏—Ç —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–ª–∞–Ω—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –¥–æ—Ä–æ–≥–æ—Å—Ç–æ—è—â–µ–π –∫–æ–º–ø–∏–ª—è—Ü–∏–∏.

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–µ**: –ü—Ä–∏ –Ω–µ—Ö–≤–∞—Ç–∫–µ –ø–∞–º—è—Ç–∏ SQL Server –Ω–∞—á–∏–Ω–∞–µ—Ç –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ —É–¥–∞–ª—è—Ç—å —Å—Ç–∞—Ä—ã–µ –∏ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–ª–∞–Ω—ã –∏–∑ –∫—ç—à–∞. –≠—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ —É—á–∞—â–µ–Ω–∏—é –∫–æ–º–ø–∏–ª—è—Ü–∏–π (—Ä–æ—Å—Ç `SQL Compilations/sec`), —á—Ç–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –¶–ü.

**–ö–∞–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å**:
```sql
-- –†–∞–∑–º–µ—Ä –∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∫—ç—à–∞ –ø–ª–∞–Ω–æ–≤
SELECT
    COUNT(*) AS CachedPlansCount,
    SUM(size_in_bytes) / 1048576.0 AS TotalSize_MB,
    SUM(CAST(usecounts AS BIGINT)) AS TotalUseCount
FROM sys.dm_exec_cached_plans;

-- –ü–æ–∏—Å–∫ ¬´–æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã—Ö¬ª –ø–ª–∞–Ω–æ–≤, –∑–∞—Å–æ—Ä—è—é—â–∏—Ö –∫—ç—à
SELECT objtype, COUNT(*) AS PlansCount,
       SUM(size_in_bytes) / 1048576.0 AS Size_MB
FROM sys.dm_exec_cached_plans
WHERE usecounts = 1
GROUP BY objtype
ORDER BY Size_MB DESC;
```

### ‚öôÔ∏è –£—Ä–æ–≤–µ–Ω—å 4: –ü–∞–º—è—Ç—å –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ (Memory Grants)
**–ß—Ç–æ —ç—Ç–æ –∏ –∑–∞—á–µ–º**: –û–ø–µ—Ä–∞—Ü–∏–∏ –≤—Ä–æ–¥–µ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ (`SORT`) –∏–ª–∏ —Ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è (`HASH JOIN`) —Ç—Ä–µ–±—É—é—Ç –≤—ã–¥–µ–ª–µ–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π —Ä–∞–±–æ—á–µ–π –ø–∞–º—è—Ç–∏. –í—ã–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è ¬´–≥—Ä–∞–Ω—Ç–æ–º –ø–∞–º—è—Ç–∏¬ª (Memory Grant).

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–µ**: –ü—Ä–∏ –≤—ã—Å–æ–∫–æ–π –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏–∏ –∑–∞ –ø–∞–º—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã –≤—ã—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥—å –Ω–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ –≥—Ä–∞–Ω—Ç–∞, –ø–æ—è–≤–ª—è—é—Ç—Å—è –æ–∂–∏–¥–∞–Ω–∏—è `RESOURCE_SEMAPHORE`. –ï—Å–ª–∏ –ø–∞–º—è—Ç–∏ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –∫–∞—Ç–∞—Å—Ç—Ä–æ—Ñ–∏—á–µ—Å–∫–∏, SQL Server –º–æ–∂–µ—Ç –Ω–∞—á–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `tempdb` –¥–ª—è –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (`spills`), —á—Ç–æ —Ä–µ–∑–∫–æ –∑–∞–º–µ–¥–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ.

**–ö–∞–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å**:
```sql
-- –û–∂–∏–¥–∞–Ω–∏—è –≥—Ä–∞–Ω—Ç–æ–≤ (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 0 –≤ –Ω–æ—Ä–º–µ)
SELECT *
FROM sys.dm_exec_query_memory_grants;

-- –û—á–µ—Ä–µ–¥—å –Ω–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏
SELECT *
FROM sys.dm_exec_query_resource_semaphores;

-- –ü—Ä—è–º–æ–π —Å—á–µ—Ç—á–∏–∫ —á–µ—Ä–µ–∑ Performance Monitor
-- SQLServer: Memory Manager -> Memory Grants Pending
```

### üîß –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —à–∞–≥–∏ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ ¬´—Ç—É–ø–∏—Ç¬ª

1.  **–ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—á–µ—Ä–µ–¥–µ–π**: –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ `Memory Grants Pending` –≤ PerfMon. –ó–Ω–∞—á–µ–Ω–∏–µ > 0 ‚Äî —è–≤–Ω—ã–π –ø—Ä–∏–∑–Ω–∞–∫ –Ω–µ—Ö–≤–∞—Ç–∫–∏ –ø–∞–º—è—Ç–∏ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤.
2.  **–ê–Ω–∞–ª–∏–∑ –∫—ç—à–∞**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `Buffer Cache Hit Ratio` –∏ `Page Life Expectancy`. –ù–∏–∑–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è ‚Äî —Å–∏–≥–Ω–∞–ª –∫ —É–≤–µ–ª–∏—á–µ–Ω–∏—é –¥–æ—Å—Ç—É–ø–Ω–æ–π –ø–∞–º—è—Ç–∏ –∏–ª–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤.
3.  **–ü–æ–∏—Å–∫ –≥–ª–∞–≤–Ω—ã—Ö –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π**: –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –∫ `sys.dm_os_memory_clerks`. –≠—Ç–æ –ø–æ–∫–∞–∂–µ—Ç, –Ω–∞ —á—Ç–æ –∏–º–µ–Ω–Ω–æ —Ç—Ä–∞—Ç–∏—Ç—Å—è –ø–∞–º—è—Ç—å (–±—É—Ñ–µ—Ä–Ω—ã–π –ø—É–ª, –∫—ç—à –ø–ª–∞–Ω–æ–≤ –∏ —Ç.–¥.).
4.  **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –¥–∞–≤–ª–µ–Ω–∏—è**: –ù–µ –∑–∞–±—É–¥—å—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ **Available MBytes** –≤ PerfMon –Ω–∞ —É—Ä–æ–≤–Ω–µ –û–°. –ï—Å–ª–∏ —Å–≤–æ–±–æ–¥–Ω–æ–π –ø–∞–º—è—Ç–∏ –º–∞–ª–æ, –ø—Ä–æ–±–ª–µ–º–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ —Å–æ—Å–µ–¥–Ω–∏—Ö —Å SQL Server –ø—Ä–æ—Ü–µ—Å—Å–∞—Ö.

### üíé –ö–ª—é—á–µ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏: `min` –∏ `max server memory`
–≠—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç –≥—Ä–∞–Ω–∏—Ü—ã –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–π –º–∞—Å—Å—ã –ø–∞–º—è—Ç–∏ SQL Server. –ò—Ö **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å**.

*   **`max server memory`**: –ó–∞–¥–∞–µ—Ç –≤–µ—Ä—Ö–Ω–∏–π –ø—Ä–µ–¥–µ–ª. **–ü—Ä–∞–≤–∏–ª–æ**: `–û–±—â–∞—è –ø–∞–º—è—Ç—å —Å–µ—Ä–≤–µ—Ä–∞ - (–ø–∞–º—è—Ç—å –¥–ª—è –û–° ~2-4–ì–ë + –ø–∞–º—è—Ç—å –¥–ª—è –¥—Ä—É–≥–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π)`. –ù–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å 64 –ì–ë, –≥–¥–µ –±–æ–ª—å—à–µ –Ω–∏—á–µ–≥–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –º–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å 58-60 –ì–ë.
*   **`min server memory`**: –ó–∞–¥–∞–µ—Ç –Ω–∏–∂–Ω—é—é –≥—Ä–∞–Ω–∏—Ü—É, –Ω–∏–∂–µ –∫–æ—Ç–æ—Ä–æ–π SQL Server –Ω–µ –±—É–¥–µ—Ç –æ—Å–≤–æ–±–æ–∂–¥–∞—Ç—å –ø–∞–º—è—Ç—å –ø–æ–¥ –¥–∞–≤–ª–µ–Ω–∏–µ–º –û–°. –ü–æ–ª–µ–∑–Ω–æ –≤ –≤–∏—Ä—Ç—É–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö —Å—Ä–µ–¥–∞—Ö.

**–ö–∞–∫ –∑–∞–¥–∞—Ç—å**:
```sql
EXEC sp_configure 'show advanced options', 1;
RECONFIGURE;
EXEC sp_configure 'max server memory', 61440; -- 60 –ì–ë –≤ –ú–ë
EXEC sp_configure 'min server memory', 4096;  -- 4 –ì–ë –≤ –ú–ë
RECONFIGURE;
```
